import{a as T,u as L,b as I,r as l,s as h,j as e,S as O,f as P,X as R}from"./index-C3zIyFCL.js";import{S as U}from"./SEO-C47sX6GH.js";import{U as q}from"./users-C6KPrPZO.js";import{A as z}from"./alert-circle-DuboJTzE.js";import{C as G}from"./check-CdVS3_lf.js";import{P as F}from"./pen-BWW9Aes0.js";import{T as H}from"./trash-2-BNUy_EzL.js";const te=()=>{const{user:J,isAdmin:p}=T(),{language:i}=L(),y=I(),[c,g]=l.useState([]),[$,N]=l.useState([]),[v,w]=l.useState(!0),[d,f]=l.useState(null),[a,m]=l.useState({}),[j,u]=l.useState(""),[b,x]=l.useState(""),[B,_]=l.useState(!1),s={ko:{title:"팀원 관리",name:"이름",role:"역할",bio:"소개",profileImage:"프로필 이미지",socialLinks:"소셜 링크",sortOrder:"정렬 순서",active:"활성",joinedDate:"입사일",edit:"수정",save:"저장",cancel:"취소",delete:"삭제",addNew:"새 팀원 추가",updateSuccess:"성공적으로 업데이트되었습니다.",updateError:"업데이트 중 오류가 발생했습니다.",deleteConfirm:"정말 이 팀원을 삭제하시겠습니까?",unauthorized:"관리자 권한이 필요합니다.",totalMembers:"전체 팀원",github:"GitHub",twitter:"Twitter",linkedin:"LinkedIn",website:"웹사이트"},en:{title:"Team Management",name:"Name",role:"Role",bio:"Bio",profileImage:"Profile Image",socialLinks:"Social Links",sortOrder:"Sort Order",active:"Active",joinedDate:"Joined Date",edit:"Edit",save:"Save",cancel:"Cancel",delete:"Delete",addNew:"Add New Member",updateSuccess:"Successfully updated.",updateError:"Error updating.",deleteConfirm:"Are you sure you want to delete this team member?",unauthorized:"Admin access required.",totalMembers:"Total Members",github:"GitHub",twitter:"Twitter",linkedin:"LinkedIn",website:"Website"},ja:{title:"チーム管理",name:"名前",role:"役割",bio:"紹介",profileImage:"プロフィール画像",socialLinks:"ソーシャルリンク",sortOrder:"ソート順",active:"アクティブ",joinedDate:"入社日",edit:"編集",save:"保存",cancel:"キャンセル",delete:"削除",addNew:"新しいメンバーを追加",updateSuccess:"正常に更新されました。",updateError:"更新中にエラーが発生しました。",deleteConfirm:"このチームメンバーを削除してもよろしいですか？",unauthorized:"管理者権限が必要です。",totalMembers:"総メンバー数",github:"GitHub",twitter:"Twitter",linkedin:"LinkedIn",website:"ウェブサイト"}}[i];l.useEffect(()=>{if(!p){y("/");return}k(),C()},[p]);const k=async()=>{try{const{data:t,error:r}=await h.from("team_members").select("*").order("sort_order");if(r)throw r;g(t||[])}catch(t){console.error("Error fetching team members:",t),x("팀원 목록을 불러오는 중 오류가 발생했습니다.")}finally{w(!1)}},C=async()=>{try{const{data:t,error:r}=await h.from("projects").select("*").eq("active",!0).order("sort_order");if(r)throw r;N(t||[])}catch(t){console.error("Error fetching projects:",t)}},S=t=>{const r=c.find(n=>n.id===t);r&&(f(t),m(r))},E=async t=>{x(""),u("");try{const{error:r}=await h.from("team_members").update(a).eq("id",t);if(r)throw r;g(c.map(n=>n.id===t?{...n,...a}:n)),f(null),m({}),u(s.updateSuccess),setTimeout(()=>u(""),3e3)}catch(r){console.error("Error updating team member:",r),x(s.updateError)}},M=async t=>{if(window.confirm(s.deleteConfirm))try{const{error:r}=await h.from("team_members").delete().eq("id",t);if(r)throw r;g(c.filter(n=>n.id!==t)),u("팀원이 삭제되었습니다."),setTimeout(()=>u(""),3e3)}catch(r){console.error("Error deleting team member:",r),x(s.updateError)}},A=()=>{f(null),m({})},o=(t,r)=>{m(n=>({...n,[t]:r}))},D=t=>new Date(t).toLocaleDateString(i==="ko"?"ko-KR":i==="ja"?"ja-JP":"en-US",{year:"numeric",month:"long",day:"numeric"});return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):p?e.jsxs(e.Fragment,{children:[e.jsx(U,{title:s.title+" | SayBerry Games"}),e.jsx("div",{className:"min-h-screen py-20 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold flex items-center gap-3",children:[e.jsx(q,{className:"h-10 w-10"}),s.title]}),e.jsxs("p",{className:"text-gray-400 mt-2",children:[s.totalMembers,": ",c.length]})]}),e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:[e.jsx(P,{className:"h-5 w-5"}),s.addNew]})]}),j&&e.jsx("div",{className:"mb-6 p-4 bg-green-900/20 border border-green-500 rounded-lg text-green-400",children:j}),b&&e.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500 rounded-lg text-red-400 flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),b]}),e.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-left",children:[e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:"프로필"}),e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:s.name}),e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:s.role}),e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:s.sortOrder}),e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:s.active}),e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:s.joinedDate}),e.jsx("th",{className:"px-6 py-4 text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:d===t.id?e.jsx("input",{type:"url",value:a.profile_image||"",onChange:r=>o("profile_image",r.target.value),className:"w-32 px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"Image URL"}):e.jsx("img",{src:t.profile_image||"/default-avatar.png",alt:t.name_ko,className:"w-12 h-12 rounded-full object-cover"})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:d===t.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:a.name_ko||"",onChange:r=>o("name_ko",r.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"한국어 이름"}),e.jsx("input",{type:"text",value:a.name_en||"",onChange:r=>o("name_en",r.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"English Name"}),e.jsx("input",{type:"text",value:a.name_ja||"",onChange:r=>o("name_ja",r.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"日本語名前"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t[`name_${i}`]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["KO: ",t.name_ko," | EN: ",t.name_en," | JA: ",t.name_ja]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:d===t.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:a.role_ko||"",onChange:r=>o("role_ko",r.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"한국어 역할"}),e.jsx("input",{type:"text",value:a.role_en||"",onChange:r=>o("role_en",r.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"English Role"}),e.jsx("input",{type:"text",value:a.role_ja||"",onChange:r=>o("role_ja",r.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm",placeholder:"日本語役割"})]}):t[`role_${i}`]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:d===t.id?e.jsx("input",{type:"number",value:a.sort_order||0,onChange:r=>o("sort_order",parseInt(r.target.value)),className:"w-20 px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm"}):t.sort_order}),e.jsx("td",{className:"px-6 py-4 text-sm",children:d===t.id?e.jsx("input",{type:"checkbox",checked:a.active!==void 0?a.active:t.active,onChange:r=>o("active",r.target.checked),className:"w-4 h-4"}):e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:t.active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:d===t.id?e.jsx("input",{type:"date",value:a.joined_date||t.joined_date,onChange:r=>o("joined_date",r.target.value),className:"px-2 py-1 bg-gray-800 border border-gray-600 rounded-md focus:border-blue-500 focus:outline-none text-sm"}):D(t.joined_date)}),e.jsx("td",{className:"px-6 py-4 text-sm",children:d===t.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(t.id),className:"p-1 text-green-400 hover:text-green-300",title:s.save,children:e.jsx(G,{className:"h-5 w-5"})}),e.jsx("button",{onClick:A,className:"p-1 text-red-400 hover:text-red-300",title:s.cancel,children:e.jsx(R,{className:"h-5 w-5"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S(t.id),className:"p-1 text-blue-400 hover:text-blue-300",title:s.edit,children:e.jsx(F,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>M(t.id),className:"p-1 text-red-400 hover:text-red-300",title:s.delete,children:e.jsx(H,{className:"h-5 w-5"})})]})})]},t.id))})]})})})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-xl",children:s.unauthorized})]})})};export{te as default};
