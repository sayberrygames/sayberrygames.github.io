import{b as v,u as j,r as t,s as u,j as e}from"./index-CaI0NtCl.js";import{S as P}from"./SEO-CF4K7_er.js";import{A as N}from"./alert-circle-CweX66z3.js";import{K as m}from"./key--E9yArCo.js";const R=()=>{const w=v(),{language:p}=j(),[o,x]=t.useState(""),[d,f]=t.useState(""),[i,l]=t.useState(!1),[c,a]=t.useState(""),[h,g]=t.useState(!1),s={ko:{title:"비밀번호 재설정",newPassword:"새 비밀번호",confirmPassword:"새 비밀번호 확인",resetPassword:"비밀번호 재설정",passwordMismatch:"비밀번호가 일치하지 않습니다.",passwordTooShort:"비밀번호는 최소 6자 이상이어야 합니다.",resetSuccess:"비밀번호가 성공적으로 재설정되었습니다.",resetError:"비밀번호 재설정 중 오류가 발생했습니다.",invalidLink:"유효하지 않은 재설정 링크입니다.",redirecting:"로그인 페이지로 이동 중..."},en:{title:"Reset Password",newPassword:"New Password",confirmPassword:"Confirm New Password",resetPassword:"Reset Password",passwordMismatch:"Passwords do not match.",passwordTooShort:"Password must be at least 6 characters.",resetSuccess:"Password has been reset successfully.",resetError:"Error resetting password.",invalidLink:"Invalid reset link.",redirecting:"Redirecting to login..."},ja:{title:"パスワードリセット",newPassword:"新しいパスワード",confirmPassword:"新しいパスワード（確認）",resetPassword:"パスワードをリセット",passwordMismatch:"パスワードが一致しません。",passwordTooShort:"パスワードは6文字以上である必要があります。",resetSuccess:"パスワードが正常にリセットされました。",resetError:"パスワードのリセット中にエラーが発生しました。",invalidLink:"無効なリセットリンクです。",redirecting:"ログインページにリダイレクト中..."}}[p];t.useEffect(()=>{b()},[]);const b=async()=>{const{data:{session:r}}=await u.auth.getSession();r||a(s.invalidLink)},y=async r=>{if(r.preventDefault(),o!==d){a(s.passwordMismatch);return}if(o.length<6){a(s.passwordTooShort);return}l(!0),a("");try{const{error:n}=await u.auth.updateUser({password:o});if(n)throw n;g(!0),setTimeout(()=>{w("/login")},3e3)}catch(n){console.error("Error resetting password:",n),a(s.resetError)}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:s.title+" | SayBerry Games"}),e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:s.title})}),h?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-900/20 border border-green-500 rounded-lg text-green-400",children:s.resetSuccess}),e.jsx("p",{className:"text-gray-400",children:s.redirecting})]}):e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[c&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500 rounded-lg text-red-400 flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),c]}),e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"sr-only",children:s.newPassword}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"new-password",name:"new-password",type:"password",autoComplete:"new-password",required:!0,value:o,onChange:r=>x(r.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-700 placeholder-gray-500 text-white bg-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:s.newPassword})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:s.confirmPassword}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:d,onChange:r=>f(r.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-700 placeholder-gray-500 text-white bg-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:s.confirmPassword})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-600",children:i?"...":s.resetPassword})})]})]})})]})};export{R as default};
